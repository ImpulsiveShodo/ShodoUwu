{"version":3,"sources":["file:///D:/ShodoUwu/assets/CatController.ts"],"names":["_decorator","CharacterController","Component","input","Input","KeyCode","v3","ccclass","property","CatController","speed","g","characterController","onLoad","on","EventType","KEY_DOWN","onKeyDown","KEY_UP","onKeyUp","onDestroy","off","event","keyCode","KEY_A","z","KEY_D","KEY_W","x","KEY_S","start","node","getComponent","update","deltaTime","pos","centerWorldPosition","clone","console","log","isGrounded","name","y"],"mappings":"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","sourcesContent":["import { _decorator, CharacterController, Component, input, Input, EventKeyboard, KeyCode, Node, v3 } from 'cc';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('CatController')\r\nexport class CatController extends Component {\r\n    speed = v3(0, 0, 0);\r\n    g = 9.8;\r\n\r\n    characterController: CharacterController | null = null;\r\n    onLoad() {\r\n        input.on(Input.EventType.KEY_DOWN, this.onKeyDown, this);\r\n        input.on(Input.EventType.KEY_UP, this.onKeyUp, this);\r\n    }\r\n\r\n    onDestroy() {\r\n        input.off(Input.EventType.KEY_DOWN, this.onKeyDown, this);\r\n        input.off(Input.EventType.KEY_UP, this.onKeyUp, this);\r\n    }\r\n\r\n    onKeyDown(event: EventKeyboard) {\r\n        switch (event.keyCode) {\r\n            case KeyCode.KEY_A:\r\n                this.speed.z = -1;\r\n                break;\r\n            case KeyCode.KEY_D:\r\n                this.speed.z = 1;\r\n                break;\r\n            case KeyCode.KEY_W:\r\n                this.speed.x = 1;\r\n                break;\r\n            case KeyCode.KEY_S:\r\n                this.speed.x = -1;\r\n                break;\r\n            // case KeyCode.SPACE:\r\n            //     if (this.characterController?.isGrounded) {\r\n            //         this.speed.y = 5;\r\n            //     }\r\n            //     break;\r\n        }\r\n    }\r\n\r\n    onKeyUp(event: EventKeyboard) {\r\n        switch (event.keyCode) {\r\n            case KeyCode.KEY_A:\r\n                this.speed.z = 0;\r\n                break;\r\n            case KeyCode.KEY_D:\r\n                this.speed.z = 0;\r\n                break;\r\n            case KeyCode.KEY_W:\r\n                this.speed.x = 0;\r\n                break;\r\n            case KeyCode.KEY_S:\r\n                this.speed.x = 0;\r\n                break;\r\n        }\r\n    }\r\n\r\n    start() {\r\n        this.characterController = this.node.getComponent(CharacterController);\r\n\r\n    }\r\n\r\n    update(deltaTime: number) {\r\n        let pos = this.characterController.centerWorldPosition;\r\n\r\n        // if (this.characterController?.isGrounded === false) {\r\n        //  this.speed.y -= this.g * deltaTime;\r\n        // }\r\n        let speed = this.speed.clone();\r\n        // if (speed.length() == 0) {\r\n        //     return;\r\n        // }\r\n        console.log(this.characterController?.isGrounded, this.name, pos.x, pos.y, pos.z, this.speed.x, this.speed.y, this.speed.z);\r\n        // this.characterController?.move(speed.multiplyScalar(deltaTime));\r\n    }\r\n}\r\n"]}