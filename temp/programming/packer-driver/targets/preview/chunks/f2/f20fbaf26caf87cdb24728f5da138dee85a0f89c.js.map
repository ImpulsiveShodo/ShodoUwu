{"version":3,"sources":["file:///D:/ShodoUwu/assets/CatController.ts"],"names":["_decorator","CharacterController","Component","input","Input","KeyCode","v3","ccclass","property","CatController","movement","speed","g","characterController","onLoad","on","EventType","KEY_PRESSING","onKeyDown","KEY_DOWN","KEY_UP","onKeyUp","onDestroy","off","event","console","log","keyCode","KEY_A","x","KEY_D","KEY_W","z","KEY_S","SPACE","isGrounded","y","start","node","getComponent","update","deltaTime","pos","centerWorldPosition","move"],"mappings":"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","sourcesContent":["import { _decorator, CharacterController, Component, input, Input, EventKeyboard, KeyCode, Node, v3 } from 'cc';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('CatController')\r\nexport class CatController extends Component {\r\n    movement = v3(0, 0, 0);\r\n    speed = v3(0, 0, 0);\r\n    g = 9.8;\r\n    characterController: CharacterController | null = null;\r\n    onLoad() {\r\n        input.on(Input.EventType.KEY_PRESSING, this.onKeyDown, this);\r\n        input.on(Input.EventType.KEY_DOWN, this.onKeyDown, this);\r\n        input.on(Input.EventType.KEY_UP, this.onKeyUp, this);\r\n    }\r\n\r\n    onDestroy() {\r\n        input.off(Input.EventType.KEY_PRESSING, this.onKeyDown, this);\r\n        input.off(Input.EventType.KEY_DOWN, this.onKeyDown, this);\r\n        input.off(Input.EventType.KEY_UP, this.onKeyUp, this);\r\n    }\r\n\r\n    onKeyDown(event: EventKeyboard) {\r\n        console.log(event.keyCode);\r\n        switch (event.keyCode) {\r\n            case KeyCode.KEY_A:\r\n                this.movement.x = -1;\r\n                break;\r\n            case KeyCode.KEY_D:\r\n                this.movement.x = 1;\r\n                break;\r\n            case KeyCode.KEY_W:\r\n                this.movement.z = -1;\r\n                break;\r\n            case KeyCode.KEY_S:\r\n                this.movement.z = 1;\r\n                break;\r\n            case KeyCode.SPACE:\r\n                if (this.characterController?.isGrounded) {\r\n                    this.speed.y = 5;\r\n                }\r\n                break;\r\n        }\r\n    }\r\n\r\n    onKeyUp(event: EventKeyboard) {\r\n    }\r\n    start() {\r\n        this.characterController = this.node.getComponent(CharacterController);\r\n\r\n    }\r\n\r\n    update(deltaTime: number) {\r\n        let pos = this.characterController.centerWorldPosition;\r\n        if (this.characterController?.isGrounded === false) {\r\n            this.speed.y -= this.g * deltaTime;\r\n        }\r\n\r\n        this.characterController?.move(this.movement);\r\n        this.movement = v3(0, 0, 0);\r\n    }\r\n}\r\n"]}